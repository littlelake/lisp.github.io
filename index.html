<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="日常技术和生活分享">
<meta property="og:type" content="website">
<meta property="og:title" content="尘封">
<meta property="og:url" content="http://lispself.com/index.html">
<meta property="og:site_name" content="尘封">
<meta property="og:description" content="日常技术和生活分享">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="尘封">
<meta name="twitter:description" content="日常技术和生活分享">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://lispself.com/"/>





  <title>尘封</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">尘封</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lispself.com/2018/05/23/2018-05-22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lisp">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="尘封">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/23/2018-05-22/" itemprop="url">关于今天联调接口的感悟</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-23T00:28:35+08:00">
                2018-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生活/" itemprop="url" rel="index">
                    <span itemprop="name">生活</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天进行验收，感觉没有想象中的那么顺利，在跑整个流程的时候还是有一些自己没有考虑到的东西，总体来说有如下几点：</p>
<ol>
<li>没有弄清楚要传的字段，导致展示的时候出错，可能这算是粗心，将另外的id以为了是要传的id，后面还是一起排查才找到出错的地方。</li>
<li>流程中有些操作需要考虑的结果没有考虑到，比如说A-&gt;B时需要有一个表单提交，按理说在B-&gt;A页面进行回退的时候需要将表单里面的字段设为初始值或是为空，这样才算是更合理的回退。</li>
<li>隐藏流程，今天就踩了这个坑，流程图里面只写了“版本状态”的流程图，我以为只需要联调产品管理那块，结果后面验收的时候告诉我还有功能管理那块也是版本管理的流程，这个时候就有点懵逼了。</li>
</ol>
<p>总的来说这次联调没有到自己很差的底部，但有些可以避免的bug还是由于自己考虑不周而出现了。在这次的总结中，我觉得自己下次在进行接口联调的时候需要注意以下几点：</p>
<ul>
<li>写代码之前搞清楚流程和会出现的一些异常情况，重点是流程，清除流程后写代码事半功倍。</li>
<li>做完一个接口联调之后自己测一下，而且考虑下会出现的异常和问题</li>
<li>在做到不出大bug的情况下提升一下自己的开发速度，重点还是能够保质保量。</li>
<li>优化自己的代码，这点在后期工作中很重要。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lispself.com/2018/05/20/driving-subject-three-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lisp">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="尘封">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/20/driving-subject-three-1/" itemprop="url">科目三第一次训练</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-20T22:29:25+08:00">
                2018-05-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/生活/" itemprop="url" rel="index">
                    <span itemprop="name">生活</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>由于之前没有做准备，所以不清楚科目三会考些什么，今天教练只是带我走了一圈萝岗。针对今天的行程，有几点自己的思考：</p>
<ol>
<li>首先起步需要检查所有的车门是否关闭好，然后调整座椅和后视镜，将准备工作做好。起步前需要打左方向灯，然后按两下喇叭提醒后面的行车，然后开始行车制动。</li>
<li>科目三只会针对档位一和档位二。其中档位一在车速0-15之间，档位二在车速15-30之间。科目三有一个考点就是换挡，从一档换到二档需要在车速为0-15之间的时候进行换挡，而且是先松开油门，然后踩进离合器，然后将档位一换到空档，然后从空档到二档，然后慢慢松开离合，然后踩油门将车速提到15-30之间。如果是从档位二到档位一，则是先松开油门，然后踩紧离合，然后将二档挂到空档，然后再挂到一档，然后慢慢松开离合，然后再踩油门。</li>
<li>第二个考点就是灯光，当要换行车车道时，需要提前开启方向灯，如果是往左，就开启左方向灯，往右就是有方向灯。停靠路边也需要开启有方向灯。</li>
<li>其他的灯光问题在下次实时操作的时候学习。</li>
</ol>
<p>总结：今天第一次在马路上跑，给自己的感觉是开车没有以前自己想象的那么可怕，总的来说还算是挺兴奋的。但是在换挡的时候还是很生疏，需要多练几次或是自己多总结一下。然后就是走直线很容易犯困，切身体会了长途走直线时为啥需要劲爆一点的音乐或是有个人陪你聊天，不然真的很容易发生危险。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lispself.com/2018/05/15/mongodb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lisp">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="尘封">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/15/mongodb/" itemprop="url">MongoDB</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-15T22:26:42+08:00">
                2018-05-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>MongoDB是一个基于分布式文件存储的数据库。由C++语言编写。MongoDB是一个介于关系型数据库和非关系型数据库之间的产品。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>首先需要下载mongodb，<a href="https://www.mongodb.org/dl/win32/x86_64-2008plus-ssl?_ga=2.210511056.434950962.1526395160-1019750038.1512403254" target="_blank" rel="external">下载地址</a></p>
<font color="#09f">注：建议下载3.4版本，因为最新的3.6版本在安装过程中会出现几十分钟或是几个小时等待的情况，所以建议使用3.4版本安装。</font>

<p>在安装的过程中选择自定义选项（Custom），然后将其安装在C盘（首先在C盘新建一个mongodb的文件夹）。安装完成之后，需要在环境变量中进行设置路径，这样，mongodb算是安装完成了。</p>
<h3 id="建立数据库"><a href="#建立数据库" class="headerlink" title="建立数据库"></a>建立数据库</h3><ul>
<li>如果要在mongodb中建立数据库名，那么在<code>c://mongodb/bin</code>目录下执行<code>mongod --dbpath ../blog/</code>，这样，在mongodb文件夹下就会出现一个blog的文件夹。</li>
<li><p>如果要和nodejs建立连接（这里以express为例），那么需要在express中进行设置。</p>
<pre><code>// 首先引入mongodb
npm install mongodb -S
// 然后设置settings.js和db.js
// settings.js 
// cookieSecret用于数据库加密， db为数据库名，host为数据库地址，port为端口号，默认端口号为27017
module.exports = {
  cookieSecret: &apos;myBlog&apos;,
  db: &apos;blog&apos;,
  host: &apos;localhost&apos;,
  port: 27017
};
// db.js
var settings = require(&apos;../settings&apos;);
var Db = require(&apos;mongodb&apos;).Db;
var Connection = require(&apos;mongodb&apos;).Connection;
var Server = require(&apos;mongodb&apos;).Server;
module.exports = new Db(settings.db, new Server(settings.host, settings.port), {safe: true});
</code></pre></li>
<li><p>然后在app.js（express）中如果需要将信息保存在session中，那么需要引入<code>express-session</code>和<code>connect-mongo</code>这两个包</p>
<pre><code>npm install express-session connect-mongo -S
var session = require(&apos;express-session&apos;);
var MongoStore = require(&apos;connect-mongo&apos;)(session);

app.use(session({
  secret: settings.cokkieSecret,
  key: settings.db,
  cookie: {maxAge: 1000 * 60 * 60 * 24 * 30},
  store: new MongoStore({
    url: &apos;mongodb://localhost:27017&apos;
  }),
}));

// 没有像下面这样写是因为下面这样写会报错
store: new MongoStore({
  host: settings.host,
  port: settings.port,
  db: settings.db
})
</code></pre></li>
<li><p>最后就是在路由中进行各种骚操作了</p>
<pre><code>// 首先是打开数据库
mongodb.open(function(err, db) {
  if(err) {
    return callback(err); // 如果失败，则返回err
  }
  // 打开users集合
  db.collection(&apos;users&apos;, function(err, collection) {
    // 然后就是进行插入和查找
    collection.insert(user, function(err, user) {
      ...
    });
    collection.find(user.name, function(err, user) {
      ...
    })
  })
})
</code></pre></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lispself.com/2018/05/11/array-convert/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lisp">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="尘封">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/11/array-convert/" itemprop="url">关于多重数组转为一个数组</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-11T23:18:45+08:00">
                2018-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="数组中嵌套数组的情况"><a href="#数组中嵌套数组的情况" class="headerlink" title="数组中嵌套数组的情况"></a>数组中嵌套数组的情况</h3><blockquote>
<p>[[1, 2], [3, 4]] =&gt; [1, 2, 3, 4]</p>
</blockquote>
<pre><code>const arr = [[1, 2], [3, 4]];
[].concat.apply([], arr);
// 或者下面这样
[].concat(...arr);
</code></pre><h3 id="数组中多重嵌套的情况（且带小数点或负数）"><a href="#数组中多重嵌套的情况（且带小数点或负数）" class="headerlink" title="数组中多重嵌套的情况（且带小数点或负数）"></a>数组中多重嵌套的情况（且带小数点或负数）</h3><blockquote>
<p>[1, [2, -3, 4.01, [5, 6.21, [7, 8]], [9, 10], 22]]<br>=&gt; [1, 2, -3, 4.01, 5, 6.21, 7, 8, 9, 10, 22]</p>
</blockquote>
<pre><code>const arr = [1, [2, -3, 4.01, [5, 6.21, [7, 8]], [9, 10], 22]];
arr.toString().split(&apos;,&apos;).map(Number);
</code></pre><font color="#09f">注：这种方法只适合数字，不适合带有“，”的字符串或是千分位的数字</font>

<h3 id="递归的方式实现"><a href="#递归的方式实现" class="headerlink" title="递归的方式实现"></a>递归的方式实现</h3><pre><code>const isArr = arg =&gt; [].toString.call(arg) === &apos;[Object Array]&apos;;
const flat = inputAny =&gt; 
    (
        isArr(inputAny[0])
        ? flat(inputAny[0])
        : [inputAny[0]]
    )
    .concat(
        inputAny.length &gt; 1
        ? flat(input.slice(1)
        : []
    )

// console.log(flat([1, 2, 3]);
// console.log(flat([1, [2, 3], 4]);
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lispself.com/2018/05/04/adaptive/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lisp">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="尘封">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/04/adaptive/" itemprop="url">纯css实现移动端自适应</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-04T20:49:20+08:00">
                2018-05-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/css/" itemprop="url" rel="index">
                    <span itemprop="name">css</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="利用rem和vw来实现移动端自适应"><a href="#利用rem和vw来实现移动端自适应" class="headerlink" title="利用rem和vw来实现移动端自适应"></a>利用rem和vw来实现移动端自适应</h3><pre><code>// vm and rem
$vm_fontsize: 75; // iPhone 6尺寸的根元素大小基准值
$vm_design: 750;

// rem 单位换算：定为 75px 只是方便运算，750px-75px、640-64px、1080px-108px，如此类推
@function rem($px) {
  @return ($px / $vm_fontsize) * 1rem;
}

// 根元素大小使用 vw 单位
@function vm($px) {
  @return ($px / ($vm_design / 2)) * 100vw;
}

// 全局设置html和body，限制元素的最大最小值
html {
  font-size: ($vm_fontsize / ($vm_design / 2)) * 100vw; // 同时，通过Media Queries 限制根元素最大最小值
  @media screen and (max-width: 320px) {
      font-size: 64px;
  }
  @media screen and (min-width: 540px) {
      font-size: 108px;
  }
}

// body 也增加最大最小宽度限制，避免默认100%宽度的 block 元素跟随 body 而过大过小
body {
  max-width: 540px;
  min-width: 320px;
}
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lispself.com/2018/04/26/surge/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lisp">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="尘封">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/26/surge/" itemprop="url">surge使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-26T22:47:26+08:00">
                2018-04-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>一个免费托管静态资源的网站</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><code>npm i -g surge</code> or <code>cnpm i -g surge</code></p>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p>surge [options]</p>
<p>一般情况下直接<code>surge</code>命令后按照他后续的操作就行了，<code>surge</code>后会让你设置一下邮箱和密码，然后就是你需要托管的文件夹，当这些完成之后，会给你生成一个<code>XX.surge.sh</code>的url地址，然后直接访问后就可以获取托管后的文件。</p>
<h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><p>优点就是可以将本地的代码托管到surge上去进行跨浏览器访问，这样省去了每次部署到线上的麻烦。</p>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><p>好像暂时是不能进行跨域的</p>
<h3 id="其他选项"><a href="#其他选项" class="headerlink" title="其他选项"></a>其他选项</h3><pre><code>-p, --project       要上传的静态文件所在路径 (默认是./)
-d, --domain        要上传到哪个域名，格式必须是 你想叫什么就叫什么.surge.sh (不填的话就默认随机生成.surge.sh)
-a, --add           添加协作者 (email 邮箱)
-r, --remove        移除协作者 (email 邮箱)
</code></pre><h3 id="常用快捷命令"><a href="#常用快捷命令" class="headerlink" title="常用快捷命令"></a>常用快捷命令</h3><pre><code>surge 静态文件的路径 要上传到哪个域名
</code></pre><h3 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h3><pre><code>surge whoami        显示现在登录的是哪个帐号
surge logout        退出登录
surge login         登录帐号，只执行验证步骤
surge list          显示属于你的所有域名
surge teardown      删除属于你的指定域名
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lispself.com/2018/04/23/axios/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lisp">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="尘封">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/23/axios/" itemprop="url">axios拦截器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-23T23:51:34+08:00">
                2018-04-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h3><p>相比于fetch，axios的API更加的完善，axios也是支持promise的，而且response返回的数据已经经过了json处理，所以不需要手动的去进行转化为我们需要的json格式。</p>
<p>今天主要讲的是axios的拦截功能。</p>
<h3 id="axios-interceptor"><a href="#axios-interceptor" class="headerlink" title="axios.interceptor"></a>axios.interceptor</h3><blockquote>
<font color="#09f">我们在这里值讨论request和response</font>

</blockquote>
<p>axios的拦截器主要分为两个（只是针对request和response，对于其他的put，header，options暂不做分析），分别针对的是request请求前进行拦截处理，和response响应后进行拦截处理。代码如下：</p>
<pre><code>// 如果想在请求前在header中增加token
axios.interceptor.request.use((config) =&gt; {
  const token = sessionStorage.getItem(&apos;token&apos;);
  if(token) {
    config.headers.token = `${token}`;
  }
  return config;
}, (error) =&gt; {
  return Promise.reject(error);
});
</code></pre><p><code>axios.interceptor.request.use</code>中有两个函数，第一个函数是对config进行一些处理，第二个函数是处理失败后的情形。<code>request</code>主要是在请求前对设置进行一些处理和改变。</p>
<p>下面是response响应后的拦截器</p>
<pre><code>// 对error进行一些处理，一般用来检验是否超时或是token是否失效
axios.interceptor.response.use((response) =&gt; {
  return response;
}, (error) =&gt; {
  // 超时（假设8888状态码代表着超时）
  if(error.code === &apos;8888&apos;) {
    // 返回登录页面
    this.props.history.push(&apos;/login&apos;); // 用了react-router
  }
  return Promise.reject(error);
});
</code></pre><p><code>axios.interceptor.response.use</code>同样也有两个函数，第一函数代表着返回的结果，如果你需要对其进行一些包装，可以在第一个函数中执行。第二个函数是失败后的一些处理，像对超时的处理可以放在这里做。如果你在response里面什么都没有做，那么也可以写成这样。</p>
<pre><code>// 对error进行一些处理，一般用来检验是否超时或是token是否失效
axios.interceptor.response.use(undefined, (error) =&gt; {
  // 超时（假设8888状态码代表着超时）
  if(error.code === &apos;8888&apos;) {
    // 返回登录页面
    this.props.history.push(&apos;/login&apos;); // 用了react-router
  }
  return Promise.reject(error);
});
</code></pre><h3 id="移除拦截器"><a href="#移除拦截器" class="headerlink" title="移除拦截器"></a>移除拦截器</h3><p>如果要移除拦截器，那么可以这样：</p>
<pre><code>// 如果想在请求前在header中增加token
const myReqInterceptor = axios.interceptor.request.use((config) =&gt; {
  const token = sessionStorage.getItem(&apos;token&apos;);
  if(token) {
    config.headers.token = `${token}`;
  }

  axios.interceptor.request.eject(myReqInterceptor);

  return config;
}, (error) =&gt; {
  axios.interceptor.request.eject(myReqInterceptor);

  return Promise.reject(error);
});
</code></pre><p>为啥要放里面呢？我在外面试了一下，如果放在外面的话，里面的函数不会执行到，我想是因为异步的原因把，还没有执行到里面的函数的时候，拦截器已经被移除了，所以我就放在了里面。response移除是一样的原理，只需要把<code>request</code>改为<code>response</code>就可以了。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>总体来说，axios比fetch要好用很多，而且兼容方面，axios支持IE8+，同时axios响应时直接给你生成json格式，还有我今天提到的拦截器。所以总体来说axios还是不错的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lispself.com/2018/04/21/redux-middleware-and-enhancer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lisp">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="尘封">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/21/redux-middleware-and-enhancer/" itemprop="url">Redux中间件和Store Enhancer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-21T10:55:59+08:00">
                2018-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Redux中间件"><a href="#Redux中间件" class="headerlink" title="Redux中间件"></a>Redux中间件</h3><p>redux的运作是属于同步进行的，但我们在处理数据接口的时候，往往需要异步的方式去完成，这个时候我们引用一些中间件。但在redux的流程中一般什么时候引用会比较合适呢？</p>
<p>redux的一般使用流程是<code>dispatch -&gt; action -&gt; reducer -&gt; store</code>，中间件的使用在action与reducer之间是最合适的，所以使用时一般也是在这两者之间进行插入。</p>
<p>那一般怎么去区分从action后是直接进入到中间件中执行而不是到了reducer呢？ 一般情况下中间件都是一个函数，所以判断dispatch返回的是函数还是对象来决定进入的中间件还是reducer中。</p>
<h4 id="redux-thunk"><a href="#redux-thunk" class="headerlink" title="redux-thunk"></a>redux-thunk</h4><p>redux-thunk是常用的处理异步的中间件，其源代码为：</p>
<pre><code>function thunkMiddleware(extraArguments) {
  return ({dispatch, getState}) =&gt; (next) =&gt; (action) =&gt; {
    if(typeof action === &apos;function&apos;) {
      action(dispatch, getState, extraArgumanes);
    }
    // 抛给下一个中间件进行处理
    next(action);
  }
}

const thunk = thunkMiddleware();
export default thunk;
</code></pre><p>redux-thunk中源代码很简单，就是判断action的类型是否为function，如果是的则执行，不是则抛给下一个中间件进行处理。其中书写的方式采用了函数式编程的写法。</p>
<h4 id="使用中间件"><a href="#使用中间件" class="headerlink" title="使用中间件"></a>使用中间件</h4><p>使用中间件我们引用了redux的applyMiddleware这个方法，具体的用法有两种：</p>
<pre><code>// 方法一
import { createStore, applyMiddleware } from &apos;redux;
import thunkMiddleware from &apos;redux-thunk&apos;;

const configureStore = applyMiddleware(thunkMiddleware)(createStore);
const store = configureStore(reducer, initialState);
</code></pre><p>该方法是将thunkMiddleware作为参数，然后得到一个新的函数，得到的函数为一个store enhancer，然后将createStore作为一个参数获得一个增强版的store。但是该方式只能传一个中间件，对于使用多个中间件的方式不太适用。</p>
<pre><code>// 方法二
import { createStore, applyMiddleware, compose } from &apos;redux&apos;;
import thunkMiddleware from &apos;redux-thunk&apos;;

const win = window;
const storeEnhancer = compose(
  applyMiddleware(...middlewares),
  (win &amp;&amp; win.devToolsExtension) ? win.devToolsExtension() : f =&gt; f;
);
const store = createStore(reducer, initialState, storeEnhancer);
</code></pre><p>方法二采用了compose的方式去整合多个中间件，而且applyMiddleware必须放在第一的位置，是为了能先让异步的中间件先处理，然后再处理其他的。createStore有三个参数，第一个代表着reducer，第二个则是默认的state，第三个参数则是增强器，用于增强store的功能。</p>
<h4 id="自定义中间件"><a href="#自定义中间件" class="headerlink" title="自定义中间件"></a>自定义中间件</h4><p>自定义中间件是同样需要遵循的方式为 retrun ({dispatch, getState?}) =&gt; (next) =&gt; (action) =&gt; next(action);</p>
<p>我们可以开发一个Promise的中间件</p>
<pre><code>// 简单版
function isPromise(obj) {
  // 判断是否有then方法
  return obj &amp;&amp; typeof obj.then === &apos;function&apos;;
}

export default function promiseMiddleware() {
  return ({dispatch}) =&gt; (next) =&gt; (action) =&gt; {
    return isPromise(action) ? action.then(dispatch) : next(action);
  }
}

// 增强版
export default function promiseMiddleware() {
  return ({dispatch}) =&gt; (next) =&gt; (action) =&gt; {
    const { types, promise. ...rest } = action;
    if(!isPromise(action) || !(types &amp;&amp; types.length === 3)) {
      next(action);
    }

    const [ PENDING, DONE, FAIL ] = types;
    dispatch({...rest, type: PENDING});
    return action.promise.then(
      (result) =&gt; dispatch({...rest, result, type: DONE}),
      (error) =&gt; dispatch({...rest, error, type: FAIL})
    )
  }
}
</code></pre><p>所以在调用promiseMiddleware的时候需要传入的是一个对象<br>export const XX = (args) =&gt; {<br>  return {<br>    promise: …,<br>    types: [FETCH_START, FETCH_SUCCESS, FETCH_FAIL]<br>  }<br>}</p>
<h3 id="Store-Enhancer"><a href="#Store-Enhancer" class="headerlink" title="Store Enhancer"></a>Store Enhancer</h3><p>中间件可以用来增强redux store的dispatch方法，但也仅限于dispatch方法。如果想要更深层次的增强，那么就需要使用store enhancer。</p>
<p>store enhancer主要用于增强store的功能，一个什么都不做的store enhancer如下：</p>
<pre><code>const doNothingEnhancer = (createStore) =&gt; (reducer, proloadedState, enhancer) =&gt; {
  const store = createStore(reducer, proloadedState, enhancer);
  return store;
}
</code></pre><p>store enhancer的基本格式是传递一个createStore为参数，然后去改写原有的store。比如增加一个logEnhancer，代码如下：</p>
<pre><code>const logEnhancer = (createStore) =&gt; (reducer, proloadedState, enhancer) =&gt; {
  const store = createStore(reducer, proloadedState, enhancer);

  const originalDispatch = store.dispatch;
  store.dispatch =&gt; (action) =&gt; {
    console.log(&apos;dispatch action: &apos; + action);
    originalDispatch(action);
  }

  return store;
}
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lispself.com/2018/04/17/anyproxy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lisp">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="尘封">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/17/anyproxy/" itemprop="url">AnyProxy - 代理服务器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-17T22:14:16+08:00">
                2018-04-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>AnyProxy是一个基于NodeJS的，可供插件配置的HTTP/HTTPS代理服务器。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul>
<li>首先需要node环境，这个可以自行去<code>https://nodejs.org/en/</code>官网去一步一步操作。</li>
<li>安装好node后，需要安装下淘宝镜像<code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code>，因为我用npm怎么也安装不上，后面我看了别人的回答，说是用cnpm去进行安装，结果一下子就安装成功了。</li>
<li>安装好cnpm后，然后全局安装anyproxy, <code>cnpm install -g anyproxy</code></li>
<li>然后在控制台输出<code>anyproxy</code>进行启动，然后在web界面上访问<a href="http://127.0.0.1:8002" target="_blank" rel="external">http://127.0.0.1:8002</a>，<br>web端配置宣告成功。anyproxy的默认端口是8001，如果想修改其端口的话可以执行<code>anyproxy --port 1080</code>。</li>
</ul>
<h3 id="手机端配置（http）"><a href="#手机端配置（http）" class="headerlink" title="手机端配置（http）"></a>手机端配置（http）</h3><p>刚开始的时候我以为这样配置了在pc端就能进行接口的抓取，后面试了很久才想明白，pc端不是chrome就可以直接看吗？要这个干嘛。<br>所以后面看了别人解说移动端配置的方法。</p>
<ul>
<li>首先将pc端和手机端处在同一wifi环境下（好像我pc端直接连线也可以，所以不同wifi环境应该可是可以的）</li>
<li>手机端在当前wifi环境下设置代理，代理ip为当前pc电脑的ip地址，端口为你设置的端口，默认情况下为8001，如果你通过<code>anyproxy --port 1080</code>这样设置后，那么端口号就为1080，设置完之后就可以进行抓包了。</li>
</ul>
<h3 id="https抓包"><a href="#https抓包" class="headerlink" title="https抓包"></a>https抓包</h3><p>https下配置相对来说会麻烦一点，这里我只介绍IOS下怎么配置（没有安卓机）。</p>
<ul>
<li>首先运行<code>anyproxy</code>，通过<code>http://127.0.0.1:8002</code>打开抓包界面，然后在左边导航栏有一个RootCA的选项，打开后有一个Download的按钮，点击后进行下载，然后运行它。运行的时候需要注意在第二步中<code>导入证书</code>时选择第二个选项，然后浏览要使用的证书，然后选择第二个<code>受信任的根证书颁发机构</code>，然后选择后后面就是傻瓜式操作了。</li>
<li>pc端安装完证书后，就是手机端安装，一开始按照网上说的扫<code>download</code>按钮上的二维码，但是一直不成功，后面搜了一下后可以直接通过<code>http://your_mac_ip:8002/fetchCrtFile</code>方式进行安装（应该是只适合IOS把），安装过程很顺利，一步步来就可以了。</li>
<li>到此pc和手机端的证书都安装完了，最后进行https抓包时启动要用<code>anyproxy --intercept</code></li>
</ul>
<font color="#09f">注：如果在访问过程中手机浏览器表示不是受信任的网站，直接访问就可以了，不用管他</font>

<p>后续还需要研究的是怎样将其配置在局域网中，让多台机可以一起访问来进行抓包。然后就是自定义rule配置这块还没有学习。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lispself.com/2018/04/06/webpack-module/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lisp">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="尘封">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/06/webpack-module/" itemprop="url">webpack之module</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-06T11:35:19+08:00">
                2018-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>module决定了如何处理项目中的不同类型的模块。</p>
<h3 id="module基本的配置"><a href="#module基本的配置" class="headerlink" title="module基本的配置"></a>module基本的配置</h3><pre><code>module: {
  rules: [
    {
      test: /\.jsx?$/,  // resource中正则匹配
      include: [ // resource中查找配置的目录
        path.resolve(__dirname, &apos;src&apos;)
      ],
      use: [ // 引用的loader
        &apos;babel-loader&apos;
      ]
    }
  ]
}
</code></pre><h3 id="常用的一些配置"><a href="#常用的一些配置" class="headerlink" title="常用的一些配置"></a>常用的一些配置</h3><h4 id="test"><a href="#test" class="headerlink" title="test"></a>test</h4><p>正则表达式判断语句，用来匹配处理模块的后缀名</p>
<h4 id="include"><a href="#include" class="headerlink" title="include"></a>include</h4><p>include主要是匹配查找的目录</p>
<h4 id="exclude"><a href="#exclude" class="headerlink" title="exclude"></a>exclude</h4><p>exclude和include的作用相反，主要是剔除webpack要查找的目录</p>
<h4 id="use"><a href="#use" class="headerlink" title="use"></a>use</h4><p>use作为一个数组，里面的参数可以是字符串或是对象</p>
<pre><code>// 字符串
use: [
  &apos;style-loader&apos;,
  &apos;css-loader&apos;
]

// 对象
use: [
  &apos;style-loader&apos;,
  {
    loader: &apos;css-loader&apos;,
    options: {
      importLoaders: 1
    }
  }
]
</code></pre><font color="#09f">其中options参数怎么用，这个要视具体插件的情况而定。具体的用法可以在使用时参考<code>npmjs.com</code></font>

<h4 id="oneOf"><a href="#oneOf" class="headerlink" title="oneOf"></a>oneOf</h4><p>oneOf<array>，当规则匹配时，只使用第一个匹配规则。</array></p>
<p>eg：</p>
<pre><code>{
  test: /.css$/,
  oneOf: [
    {
      resourceQuery: /inline/, // foo.css?inline
      use: &apos;url-loader&apos;
    },
    {
      resourceQuery: /external/, // foo.css?external
      use: &apos;file-loader&apos;
    }
  ]
}
</code></pre><h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><p>如果需要在css中通过相对路径的形式引入图片，那么需要在url-loader,file-loader中引入outputPath</p>
<pre><code>{
  test: /\.(jpe?g|png|gif)$/,
  use: [
    {
      loader: &apos;url-loader&apos;,
      options: {
        limit: 8192, // 小于8k的图片自动转为base64格式，并且不会存在实体图片
        outputPath: &apos;images/&apos;  // 图片打包后存放的目录
      }
    }
  ]
}
</code></pre><p>引用的时候如下：</p>
<pre><code>.wrap {
  font-size: 14px;
  background: url(../images/bg.png) no-repeat;
}
</code></pre><hr>
<p>如果在html中引入图片不想通过request的形式，那么可以通过引用插件<code>html-withimg-loader</code>来实现。</p>
<pre><code>{
  test: /\.(htm|html)$/,
  use: &apos;html-withimg-loader&apos;
}
</code></pre><p>使用的时候如下：</p>
<pre><code>&lt;div class=&quot;wrap&quot;&gt;
  &lt;img src=&quot;images/ng.png&quot; alt=&quot;&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">lisp</p>
              <p class="site-description motion-element" itemprop="description">日常技术和生活分享</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lisp</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
